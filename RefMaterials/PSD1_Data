Board block aggregate header (4 words)
First word
bit[0:27] = Board aggregate size in 32-bit words
bit[28: 31] = 0b1010
Second word
bit[0:7] = Dual channel mask. if bit1 is set, the pair of ch0 and ch1. if bit2 is set, the pair of ch2 and ch3, etc.
bit[8:22] = Pattern of LVDS
bit[26] = board fail flag
bit[27:31] = Board ID
Third word
bit[0:22] = Board aggregate counter
Fourth word
bit[0:31] = Board aggregate time tag.

If Dual channel mask is 0b110, the first Dual channel block is for ch2 and ch3, the second Dual channel block is for ch4 and ch5.
Dual channel block aggregate header (2 words)
First word
bit[0:21] = Dual channel aggregate size in 32-bit words
bit[31] = 0b1
Second word
bit[0:15] = Number of samles in the waveform / 8. If this is 0, the waveform is not present. NUM SAMPLES WAVE/8 corresponds to the number of words to be read in the event related to the waveform /4 (2 samples per word)
bit[16:18] = DP1: Digital Virtual Probe 1 selection among:
000 = “Long Gate”;
001 = “Over Threshold”, digital signal that is 1 when the input signal is over the requested threshold;
010 = “Shaped TRG”, logic signal generated by a channel in correspondence with its local self‐ trigger. It is
used to propagate the trigger to the other channels of the board and to other external boards, as well as
to feed the coincidence trigger logic (refer to [RD3]);
011 = “TRG Val. Acceptance Win.”, logic signal corresponding to the time window where the coincidence
validation is accepted. The validation enables the event dump into the memory (see [RD3]);
100 = “Pile Up“, logic pulse set to 1 when a pile up event occurred (not implemented);
101 = “Coincidence“, logic pulse set to 1 when a coincidence occurred (refer to [RD3]);
110 = reserved;
111 = “Trigger”.
bit[19:21] = DP2: Digital Virtual Probe 2 selection among:
000 = “Short Gate”;
001 = “Over Threshold”, digital signal that is 1 when the input signal is over the requested threshold;
010 = “TRG Validation”, digital signal that is 1 when a coincidence validation signal comes from the mother
board FPGA (refer to [RD3]);
011 = “TRG HoldOff”, logic signal generated by a channel in correspondence with its local self‐ trigger. Other
triggers are inhibited for the overall Trigger Hold‐Off duration;
100 = “Pile Up“, logic pulse set to 1 when a pile up event occurred (to be implemented);
101 = “Coincidence“, logic pulse set to 1 when a coincidence occurred (refer to [RD3]);
110 = reserved;
111 = “Trigger”.
bit[22:23] = AP: Analog Probe selection. For 725 and 730 series possible selections are:
If DT = 0:
00 = “Input”;
01 = “CFD”;
If DT = 1:
00 = “Input” and “Baseline”;
01 = “CFD” and “Baseline”;
10 = “Input” and “CFD”;
bit[24:26] = Extra option. Usually use 0b010
000 = the word “EXTRAS” will be read as:
[31 : 16] = extended time stamp: those 16 bits must be read as the most significant bits of the time
stamp, which becomes a 31+16=47 bit number;
[15 : 0] = the baseline value multiplied by 4.
001 = = the word “EXTRAS” will be read as:
[31 : 16] = extended time stamp: those 16 bits must be read as the most significant bits of the time
stamp, which becomes a 31+16=47 bit number;
[15 : 0] = flags, where bit[15]: Trigger Lost (the first event after a trigger lost has this flag set); bit[14]:
Over‐range (identifies an event saturating inside the gate ‐ clipping); bit[13]: 1024 trigger counted
(every 1024 counted events this flag is high); bit[12]: N lost trigger counted (every N counted lost
events this flag is high, where N is set from bits[17:16] of register 0x1n84);
010 = the word “EXTRAS” will be read as:
[31 : 16] = extended time stamp: those 16 bits must be read as the most significant bits of the time
stamp, which becomes a 31+16=47 bit number;
[15 : 10] = flags, where bit[15]: Trigger Lost (the first event after a trigger lost has this flag set); bit[14]:
Over‐range (identifies an event saturating inside the gate ‐ clipping); bit[13]: 1024 trigger counted
(every 1024 counted events this flag is high); bit[12]: N lost trigger counted (every N counted lost
events this flag is high, where N is set from bits[17:16] of register 0x1n84);
[9 : 0] = fine time stamp (Tfine – see the definition in [RD2]).
100 = the word “EXTRAS” will be read as:
[31 : 16] = Lost Trigger Counter;
[15 : 0] = Total Trigger Counter.
101 = the word “EXTRAS” will be read as:
[31 : 16] = CFD Sample After the Zero Crossing (SAZC);
[15 : 0] = CFD Sample Before the Zero Crossing (SBZC).
111 = the word “EXTRAS” will be read as the fixed value of 0x12345678 (debug use only).
bit[31] = DT: Dual trace enabled flag (1 = enabled, 0 = disabled)
bit[30] = EQ: Charge enabled flag, must be 1
bit[29] = ET: Time Tag enabled flag, must be 1
bit[28] = EE: Extras enabled flag
bit[27] = ES: Waveform (samples) enabled flag

After header, events block
First word
bit[0:30] = Trigger time tag
bit[31] = showing channel number of pair. 0 is even channel, 1 is odd channel
If Num samples Wave/8 is not 0, the next words are waveform data. Lower bit signal is the first sample, higher bit signal is the second sample. If DT flag is set, the first sample is AP1 and the second sample is AP2, and so on.
bit[0:13] = Analog Probe data.
bit[14] = Digital Probe 1
bit[15] = Digital Probe 2
bit[16:29] = Analog Probe data
bit[30] = Digital Probe 1
bit[31] = Digital Probe 2
DPim (i=1, 2; m=0, 1, …,n‐1): Digital Virtual Probe value i for sample m. DP1m is the value of the probe written
in DP1 flag. DP2m is the value of the probe written in DP2 flag.
Sm′ (m′=0, 2, 4, …, n‐2): Even Samples of the analog probe (whose flag is stored in AP) at time t=m′
.
Sm′′ (m′′=1, 3, 5, …, n‐1): Odd Samples of the analog probe (whose flag is stored in AP) at time t=m′′
.
If DT=1, Sm′′ corresponds to the second analog probe at time t=m′′‐ 1.
For example if DT= 1, and the analog probe selection is “Input” – “Baseline”, Sm’ will corresponds to the
“Input” sample at time m′, while Sm′′ will corresponds to the “Baseline” at the same time m′ (= m′′‐1).
After the waveform data, there are 2 words.
Second word
bit[0:31] = Extras. In our case, usually Extra option == 0b010, bit[0:9] = fine time stamp, bit[10:15] = flags, bit[16:31] = extended time stamp.
Third word
bit[0:14] = Charge Short
bit[15] = Pile up flag
bit[16:31] = Charge Long